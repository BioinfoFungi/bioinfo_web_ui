{"version":3,"sources":["webpack:///./src/views/User/roleList.vue?7f4b","webpack:///./src/api/RoleResource.js","webpack:///src/views/User/roleList.vue","webpack:///./src/views/User/roleList.vue?d294","webpack:///./src/views/User/roleList.vue","webpack:///./src/api/resource.js","webpack:///./src/api/role.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","visible","on","onClose","_v","_s","cur_role","_e","staticStyle","model","value","callback","$$v","selectedRsource","expression","_l","item","key","id","url","addUserRole","resourcesListColumns","resourcesList","record","columns","data","loading","handleTableChange","scopedSlots","_u","fn","text","$event","showDrawer","slot","staticClass","style","textAlign","pagination","page","total","size","staticRenderFns","baseUrl","RoleResourceApi","params","service","method","sort","queryParam","keyword","categoryId","status","undefined","resources","mounted","loadData","methods","pageSize","loadResource","handleChange","RoleResource","roleId","resourceId","message","resp","component","ResourceApi","RoleApi"],"mappings":"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","file":"js/roleList.c52e9b10.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('a-drawer',{attrs:{\"title\":\"用户管理\",\"placement\":\"right\",\"closable\":false,\"visible\":_vm.visible,\"width\":\"520\"},on:{\"close\":_vm.onClose}},[(_vm.cur_role)?_c('div',[_vm._v(\" \"+_vm._s(_vm.cur_role)+\" \")]):_vm._e(),_c('div',[_c('a-select',{staticStyle:{\"width\":\"200px\"},attrs:{\"size\":\"default\"},model:{value:(_vm.selectedRsource),callback:function ($$v) {_vm.selectedRsource=$$v},expression:\"selectedRsource\"}},_vm._l((_vm.resources),function(item){return _c('a-select-option',{key:item.id},[_vm._v(\" \"+_vm._s(item.url)+\" \")])}),1),_c('a-button',{on:{\"click\":_vm.addUserRole}},[_vm._v(\"确认\")]),_c('div',[_c('a-table',{attrs:{\"columns\":_vm.resourcesListColumns,\"data-source\":_vm.resourcesList,\"bordered\":\"\",\"pagination\":false,\"row-key\":function (record) { return record.id; }}})],1)],1)]),_c('a-table',{attrs:{\"columns\":_vm.columns,\"row-key\":function (record) { return record.id; },\"data-source\":_vm.data,\"pagination\":false,\"loading\":_vm.loading},on:{\"change\":_vm.handleTableChange},scopedSlots:_vm._u([{key:\"action\",fn:function(text, record){return _c('span',{},[_c('a-divider',{attrs:{\"type\":\"vertical\"}}),_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){return _vm.showDrawer(record)}}},[_vm._v(\"更多\")])],1)}}])},[_c('template',{slot:\"footer\"},[_c('div',{staticClass:\"page-wrapper\",style:({ textAlign: 'right' })},[_c('a-pagination',{staticClass:\"pagination\",attrs:{\"current\":_vm.pagination.page,\"total\":_vm.pagination.total,\"defaultPageSize\":_vm.pagination.size,\"pageSizeOptions\":['5', '10', '20', '50', '100'],\"showSizeChanger\":\"\"},on:{\"showSizeChange\":_vm.handleTableChange,\"change\":_vm.handleTableChange}})],1)])],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from '@/utils/service'\nconst baseUrl = '/api/role_resource'\n\nconst RoleResourceApi = {}\n\n\nRoleResourceApi.add = (params) => {\n    return service({\n        url: baseUrl,\n        data: params,\n        method: 'post'\n    })\n}\nexport default RoleResourceApi","<template>\n  <div>\n    <a-drawer\n      title=\"用户管理\"\n      placement=\"right\"\n      :closable=\"false\"\n      :visible=\"visible\"\n      width=\"520\"\n      @close=\"onClose\"\n    >\n      <div v-if=\"cur_role\">\n        {{ cur_role }}\n      </div>\n      <div>\n        <a-select size=\"default\" style=\"width: 200px\" v-model=\"selectedRsource\">\n          <a-select-option v-for=\"item in resources\" :key=\"item.id\">\n            {{ item.url }}\n          </a-select-option>\n        </a-select>\n        <a-button @click=\"addUserRole\">确认</a-button>\n        <div>\n          <!-- {{ resourcesList }} -->\n          <a-table\n            :columns=\"resourcesListColumns\"\n            :data-source=\"resourcesList\"\n            bordered\n            :pagination=\"false\"\n            :row-key=\"(record) => record.id\"\n          >\n          </a-table>\n        </div>\n      </div>\n    </a-drawer>\n    <a-table\n      :columns=\"columns\"\n      :row-key=\"(record) => record.id\"\n      :data-source=\"data\"\n      :pagination=\"false\"\n      :loading=\"loading\"\n      @change=\"handleTableChange\"\n    >\n      <span slot=\"action\" slot-scope=\"text, record\">\n        <a-divider type=\"vertical\" />\n        <a href=\"javascript:;\" @click=\"showDrawer(record)\">更多</a>\n      </span>\n      <template slot=\"footer\">\n        <div class=\"page-wrapper\" :style=\"{ textAlign: 'right' }\">\n          <a-pagination\n            class=\"pagination\"\n            :current=\"pagination.page\"\n            :total=\"pagination.total\"\n            :defaultPageSize=\"pagination.size\"\n            :pageSizeOptions=\"['5', '10', '20', '50', '100']\"\n            showSizeChanger\n            @showSizeChange=\"handleTableChange\"\n            @change=\"handleTableChange\"\n          />\n        </div>\n      </template>\n    </a-table>\n  </div>\n</template>\n<script>\nimport RoleApi from \"@/api/role.js\";\nimport ResourceApi from \"@/api/resource.js\";\nimport RoleResourceApi from \"@/api/RoleResource.js\";\nconst resourcesListColumns=[\n   {\n    title: \"id\",\n    dataIndex: \"id\",\n  }, {\n    title: \"url\",\n    dataIndex: \"url\",\n  },{\n    title: \"name\",\n    dataIndex: \"name\",\n  },\n]\nconst columns = [\n  {\n    title: \"id\",\n    dataIndex: \"id\",\n  },\n  {\n    title: \"name\",\n    dataIndex: \"name\",\n  },\n  {\n    title: \"enName\",\n    dataIndex: \"enName\",\n  },\n  {\n    title: \"Action\",\n    key: \"action\",\n    scopedSlots: { customRender: \"action\" },\n  },\n];\n\nexport default {\n  data() {\n    return {\n      pagination: {\n        page: 1,\n        size: 10,\n        sort: null,\n      },\n      queryParam: {\n        page: 0,\n        size: 10,\n        sort: null,\n        keyword: null,\n        categoryId: null,\n        status: null,\n      },\n      data: [],\n      loading: false,\n      columns,\n      visible: false,\n      cur_role: undefined,\n      resources: [],\n      resourcesList: [],\n      selectedRsource: \"\",\n      resourcesListColumns\n    };\n  },\n  mounted() {\n    this.loadData();\n  },\n  methods: {\n    handleTableChange(page, pageSize) {\n      this.pagination.page = page;\n      this.pagination.size = pageSize;\n      this.loadData();\n    },\n    loadData() {\n      this.queryParam.page = this.pagination.page - 1;\n      this.queryParam.size = this.pagination.size;\n      this.queryParam.sort = this.pagination.sort;\n      this.loading = true;\n      RoleApi.page(this.queryParam).then((resp) => {\n        // console.log(resp);\n        // console.log(resp.data.data.totalPages);\n        this.data = resp.data.data.content;\n        this.pagination.total = parseInt(resp.data.data.totalElements);\n        this.loading = false;\n      });\n    },\n    loadResource(id) {\n      ResourceApi.findByRoleId(id).then((resp) => {\n        this.resourcesList = resp.data.data;\n        // console.log(resp)\n      });\n    },\n    showDrawer(data) {\n      this.cur_role = data;\n      this.visible = true;\n      ResourceApi.listAll().then((resp) => {\n        // console.log(resp);\n        this.resources = resp.data.data;\n      });\n      this.loadResource(data.id);\n    },\n    onClose() {\n      this.visible = false;\n    },\n    handleChange() {},\n    addUserRole() {\n      // console.log(this.selectedRole)\n      // console.log(this.cur_user.id)\n      RoleResourceApi.add({\n        roleId: this.cur_role.id,\n        resourceId: this.selectedRsource,\n      }).then((resp) => {\n        this.loadResource(this.cur_role.id)\n        this.$notification[\"success\"]({\n          message: \"添加成功\" + resp.data.message,\n        });\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roleList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./roleList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./roleList.vue?vue&type=template&id=65b57b9e&\"\nimport script from \"./roleList.vue?vue&type=script&lang=js&\"\nexport * from \"./roleList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import service from '@/utils/service'\nconst baseUrl = '/api/resource'\n\nconst ResourceApi = {}\n\nResourceApi.page = (params) =>{\n    return service({\n        url: `${baseUrl}`,\n        params: params,\n        method: 'get'\n    })\n}\nResourceApi.listAll = () =>{\n    return service({\n        url: `${baseUrl}/listAll`,\n        method: 'get'\n    })\n}\n\nResourceApi.findByRoleId = (id) =>{\n    return service({\n        url: `${baseUrl}/findByRoleId/${id}`,\n        method: 'get'\n    })\n}\nexport default ResourceApi\n","import service from '@/utils/service'\nconst baseUrl = '/api/role'\n\nconst RoleApi = {}\n\nRoleApi.page = (params) =>{\n    return service({\n        url: `${baseUrl}`,\n        params: params,\n        method: 'get'\n    })\n}\n\nRoleApi.listAll = () =>{\n    return service({\n        url: `${baseUrl}/listAll`,\n        method: 'get'\n    })\n}\nRoleApi.findByRoleId = (id) =>{\n    return service({\n        url: `${baseUrl}/findByRoleId/${id}`,\n        method: 'get'\n    })\n}\n\nexport default RoleApi\n"],"sourceRoot":""}