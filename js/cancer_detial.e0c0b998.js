(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cancer_detial"],{"47d5":function(t,a,e){"use strict";var n=e("9efd"),i="/api/code",c={page:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n["a"])({url:"".concat(i,"?more=").concat(a),params:t,method:"get"})},findByCan:function(t){return Object(n["a"])({url:"".concat(i,"/findByCan/").concat(t),method:"get"})},checkFileExist:function(t){return Object(n["a"])({url:"".concat(i,"/checkFile/").concat(t),method:"get"})},del:function(t){return Object(n["a"])({url:"".concat(i,"/del/").concat(t),method:"get"})},add:function(t){return Object(n["a"])({url:i,data:t,method:"post"})},update:function(t,a){return Object(n["a"])({url:"".concat(i,"/update/").concat(t),data:a,method:"post"})},findById:function(t,a){return Object(n["a"])({url:"".concat(i,"/findById/").concat(t),params:a,method:"get"})}};a["a"]=c},"724d":function(t,a,e){"use strict";var n=e("9efd"),i="/api/cancer_study",c={page:function(t){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n["a"])({url:"".concat(i,"?more=").concat(a),params:t,method:"get"})},listByCancerId:function(t){return Object(n["a"])({url:"".concat(i,"/listByCancerId/").concat(t),method:"get"})},del:function(t){return Object(n["a"])({url:"".concat(i,"/del/").concat(t),method:"get"})},checkFileExist:function(t){return Object(n["a"])({url:"".concat(i,"/checkFile/").concat(t),method:"get"})},add:function(t){return Object(n["a"])({url:i,data:t,method:"post"})},update:function(t,a){return Object(n["a"])({url:"".concat(i,"/update/").concat(t),data:a,method:"post"})},findById:function(t,a){return Object(n["a"])({url:"".concat(i,"/findById/").concat(t),params:a,method:"get"})}};a["a"]=c},a9ad:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("a-drawer",{attrs:{title:"癌症研究",placement:"right",closable:!1,visible:t.visible,width:"520"},on:{close:t.onClose}},[t.CancerStudyDetial?e("div",[e("a-form-item",{attrs:{label:"fileName"}},[e("a-input",{attrs:{value:t.CancerStudyDetial.fileName}})],1),e("a-form-item",{attrs:{label:"fileType"}},[e("a-input",{attrs:{value:t.CancerStudyDetial.fileType}})],1),e("a-form-item",{attrs:{label:"absolutePath"}},[e("a-input",{attrs:{value:t.CancerStudyDetial.absolutePath}})],1),e("a-form-item",{attrs:{label:"location"}},[e("a-input",{attrs:{value:t.CancerStudyDetial.location}})],1),e("a-form-item",{attrs:{label:"uuid"}},[e("a-input",{attrs:{value:t.CancerStudyDetial.uuid}})],1),e("a-button",{on:{click:function(a){return t.showLog(t.CancerStudyDetial.id)}}},[t._v("查看日志")]),e("a-button",[t._v("重新下载")]),e("a-divider"),t._l(t.codeList,(function(a){return e("a-button",{key:a.id,attrs:{type:"link"},on:{click:function(e){return t.runTask(t.CancerStudyDetial.id,a.id)}}},[t._v(" "+t._s(a.name)+" ")])})),e("div",[e("a-table",{attrs:{columns:t.task_columns,"data-source":t.taskList,bordered:"",pagination:!1,"row-key":function(t){return t.id}}})],1)],2):t._e()]),e("a-table",{attrs:{columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,pagination:!1,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"absolutePath",fn:function(a,n){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCancerStudy(n.id)}}},[t._v("位置")])])}},{key:"action",fn:function(a,n){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.checkFileExist(n.id)}}},[t._v(t._s(n.status))]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.showDrawer(n)}}},[t._v("更多")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.updateCancerStudy(n.id)}}},[t._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(a){return t.delCancerStudy(n.id)}}},[t._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[e("a-pagination",{staticClass:"pagination",attrs:{current:t.pagination.page,total:t.pagination.total,defaultPageSize:t.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:t.handleTableChange,change:t.handleTableChange}})],1)])],2)],1)},i=[],c=(e("b0c0"),e("724d")),r=e("47d5"),o=e("b199"),u=[{title:"id",dataIndex:"id"},{title:"taskStatus",dataIndex:"taskStatus"},{title:"isSuccess",dataIndex:"isSuccess"}],d=[{title:"id",dataIndex:"id"},{title:"癌症名称",dataIndex:"cancer.name"},{title:"研究名称",dataIndex:"study.name"},{title:"数据来源",dataIndex:"dataOrigin.name"},{title:"数据分类",dataIndex:"dataCategory.name"},{title:"分析软件",dataIndex:"analysisSoftware.name"},{title:"大小",dataIndex:"size"},{title:"日期",dataIndex:"createDate"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],tasks:[],loading:!1,columns:d,task_columns:u,cancerId:null,visible:!1,CancerStudyDetial:void 0,codeList:[],taskList:[]}},mounted:function(){this.loadData()},methods:{handleTableChange:function(t,a){this.pagination.page=t,this.pagination.size=a,this.loadData()},loadData:function(){var t=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort;var a=this.$route.query.cancerId,e=this.$route.query.studyId,n=this.$route.query.dataOriginId,i=this.$route.query.dataCategoryId,r=this.$route.query.analysisSoftwareId;this.queryParam.cancerId=a,this.queryParam.studyId=e,this.queryParam.dataOriginId=n,this.queryParam.dataCategoryId=i,this.queryParam.analysisSoftwareId=r,this.loading=!0,c["a"].page(this.queryParam,!0).then((function(a){t.data=a.data.data.content,t.pagination.total=parseInt(a.data.data.totalElements),t.loading=!1}))},updateProject:function(t){this.$router.push({name:"cancer_cancer_study",query:{projectId:t}})},delProject:function(t){var a=this;c["a"].del(t).then((function(t){a.$notification["success"]({message:t.data.data.name+":删除成功!"}),a.loadData()}))},updateCancerStudy:function(t){this.$router.push({name:"update_cancer_study",query:{cancerStudyId:t}})},delCancerStudy:function(t){var a=this.loadData,e=this.$notification["success"];this.$confirm({title:"删除癌症数据",content:"您确定要删除该癌症数据吗?",onOk:function(){c["a"].del(t).then((function(t){a(),e({message:"删除成功!"+t.data.message})}))},onCancel:function(){}})},loadTask:function(t){var a=this;o["a"].page({cancerStudyId:t}).then((function(t){a.taskList=t.data.data.content}))},showDrawer:function(t){var a=this;this.CancerStudyDetial=t,r["a"].findByCan(t.id).then((function(t){a.codeList=t.data.data})),this.loadTask(t.id),this.visible=!0},onClose:function(){this.visible=!1},checkFileExist:function(t){var a=this.loadData,e=this.$notification["success"],n=this.$notification["error"];c["a"].checkFileExist(t).then((function(t){a(),t.data.data.status?e({message:"文件存在："+t.data.data.absolutePath}):n({message:"文件不存在"+t.data.data.absolutePath})}))},showLog:function(t){this.$router.push({name:"cancer_study_task",query:{cancerStudyId:t}})},runTask:function(t,a){var e=this;o["a"].run({cancerStudyId:t,codeId:a}).then((function(a){e.loadTask(t),e.$message.success(a.data.data.name+"创建成功")}))}}},l=s,h=e("2877"),f=Object(h["a"])(l,n,i,!1,null,null,null);a["default"]=f.exports},b199:function(t,a,e){"use strict";var n=e("9efd"),i="/api/task",c={page:function(t){return Object(n["a"])({url:"".concat(i),params:t,method:"get"})},run:function(t){return Object(n["a"])({url:"".concat(i,"/run"),params:t,method:"get"})},runOne:function(t){return Object(n["a"])({url:"".concat(i,"/run/").concat(t),method:"get"})},del:function(t){return Object(n["a"])({url:"".concat(i,"/del/").concat(t),method:"get"})}};a["a"]=c}}]);
//# sourceMappingURL=cancer_detial.e0c0b998.js.map