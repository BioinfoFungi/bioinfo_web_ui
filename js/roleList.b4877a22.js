(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["roleList"],{"02c7":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v(" 添加角色")]),a("a-modal",{attrs:{title:"Basic Modal"},on:{ok:t.handleOk},model:{value:t.modal_visible,callback:function(e){t.modal_visible=e},expression:"modal_visible"}},[a("a-form-model",{ref:"ruleForm",attrs:{model:t.form}},[a("a-form-model-item",{ref:"name",attrs:{label:"name",prop:"name"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-model-item",{ref:"enName",attrs:{label:"enName",prop:"enName"}},[a("a-input",{model:{value:t.form.enName,callback:function(e){t.$set(t.form,"enName",e)},expression:"form.enName"}})],1)],1)],1),a("a-drawer",{attrs:{title:"用户管理",placement:"right",closable:!1,visible:t.visible,width:"620"},on:{close:t.onClose}},[t.cur_role?a("div"):t._e(),a("div",[a("a-select",{staticStyle:{width:"200px"},attrs:{size:"default","filter-option":t.filterOption,"show-search":""},model:{value:t.selectedRsource,callback:function(e){t.selectedRsource=e},expression:"selectedRsource"}},t._l(t.resources,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s([e.method]+e.url)+" ")])})),1),a("a-button",{on:{click:t.addRoleResource}},[t._v("确认")]),a("div",[a("a-table",{attrs:{columns:t.resourcesListColumns,"data-source":t.resourcesList,bordered:"",pagination:!1,"row-key":function(t){return t.id}},scopedSlots:t._u([{key:"action",fn:function(e,o){return a("span",{},[a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.delRoleResource(o)}}},[t._v("删除")])],1)}}])})],1)],1)]),a("a-table",{attrs:{columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,pagination:!1,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,o){return a("span",{},[a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.showDrawer(o)}}},[t._v("更多")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.delRole(o.id)}}},[t._v("删除")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.updateRole(o)}}},[t._v("更新")])],1)}}])},[a("template",{slot:"footer"},[a("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[a("a-pagination",{staticClass:"pagination",attrs:{current:t.pagination.page,total:t.pagination.total,defaultPageSize:t.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:t.handleTableChange,change:t.handleTableChange}})],1)])],2)],1)},n=[],i=a("cc5e"),r=a("6c6e"),s=a("5c46"),c=[{title:"id",dataIndex:"id"},{title:"method",dataIndex:"method"},{title:"url",dataIndex:"url"},{title:"name",dataIndex:"name"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],l=[{title:"id",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"enName",dataIndex:"enName"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],d={data:function(){return{pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],loading:!1,columns:l,visible:!1,modal_visible:!1,cur_role:void 0,resources:[],resourcesList:[],selectedRsource:"",resourcesListColumns:c,form:{},isUpdate:!1}},mounted:function(){this.loadData()},methods:{handleTableChange:function(t,e){this.pagination.page=t,this.pagination.size=e,this.loadData()},loadData:function(){var t=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,this.loading=!0,i["a"].page(this.queryParam).then((function(e){t.data=e.data.data.content,t.pagination.total=parseInt(e.data.data.totalElements),t.loading=!1}))},loadResource:function(t){var e=this;r["a"].findByRoleId(t).then((function(t){e.resourcesList=t.data.data}))},loadWithoutAddResource:function(t){var e=this;r["a"].findByWithoutRoleId(t).then((function(t){e.resources=t.data.data}))},showDrawer:function(t){this.cur_role=t,this.visible=!0,this.loadResource(t.id),this.loadWithoutAddResource(this.cur_role.id)},onClose:function(){this.visible=!1},addRoleResource:function(){var t=this;s["a"].add({roleId:this.cur_role.id,resourceId:this.selectedRsource}).then((function(e){t.loadResource(t.cur_role.id),t.loadWithoutAddResource(t.cur_role.id),t.$notification["success"]({message:"添加成功"+e.data.message})}))},filterOption:function(t,e){return e.componentOptions.children[0].text.toLowerCase().indexOf(t.toLowerCase())>=0},delRoleResource:function(t){var e=this;s["a"].del(t.resourceRoleId).then((function(t){e.loadResource(e.cur_role.id),e.loadWithoutAddResource(e.cur_role.id),e.$notification["success"]({message:"删除成功"+t.data.message})}))},handleOk:function(){var t=this;this.isUpdate?i["a"].update(this.form.id,this.form).then((function(e){t.modal_visible=!1,t.loadData(),t.from={},t.$notification["success"]({message:"更新成功"+e.data.message})})):i["a"].add(this.form).then((function(e){t.modal_visible=!1,t.loadData(),t.from={},t.$notification["success"]({message:"添加成功"+e.data.message})}))},delRole:function(t){var e=this;i["a"].del(t).then((function(t){e.loadData(),e.$notification["success"]({message:"删除成功"+t.data.message})}))},addUser:function(){this.modal_visible=!0,this.isUpdate=!1},updateRole:function(t){this.form=t,this.modal_visible=!0,this.isUpdate=!0}}},u=d,f=a("2877"),m=Object(f["a"])(u,o,n,!1,null,null,null);e["default"]=m.exports},"5c46":function(t,e,a){"use strict";var o=a("9efd"),n="/api/role_resource",i={add:function(t){return Object(o["a"])({url:n,data:t,method:"post"})},del:function(t){return Object(o["a"])({url:"".concat(n,"/del/").concat(t),method:"get"})}};e["a"]=i},"6c6e":function(t,e,a){"use strict";var o=a("9efd"),n="/api/resource",i={page:function(t){return Object(o["a"])({url:"".concat(n),params:t,method:"get"})},listAll:function(){return Object(o["a"])({url:"".concat(n,"/listAll"),method:"get"})},findByRoleId:function(t){return Object(o["a"])({url:"".concat(n,"/findByRoleId/").concat(t),method:"get"})},findByWithoutRoleId:function(t){return Object(o["a"])({url:"".concat(n,"/findByWithoutRoleId/").concat(t),method:"get"})}};e["a"]=i},cc5e:function(t,e,a){"use strict";var o=a("9efd"),n="/api/role",i={page:function(t){return Object(o["a"])({url:"".concat(n),params:t,method:"get"})},listAll:function(){return Object(o["a"])({url:"".concat(n,"/listAll"),method:"get"})},findByRoleId:function(t){return Object(o["a"])({url:"".concat(n,"/findByRoleId/").concat(t),method:"get"})},findByWithoutRoleId:function(t){return Object(o["a"])({url:"".concat(n,"/findByWithoutRoleId/").concat(t),method:"get"})},findByUserId:function(t){return Object(o["a"])({url:"".concat(n,"/findByUserId/").concat(t),method:"get"})},findByWithoutUserId:function(t){return Object(o["a"])({url:"".concat(n,"/findByWithoutUserId/").concat(t),method:"get"})},add:function(t){return Object(o["a"])({url:n,data:t,method:"post"})},update:function(t,e){return Object(o["a"])({url:"".concat(n,"/update/").concat(t),data:e,method:"post"})},del:function(t){return Object(o["a"])({url:"".concat(n,"/del/").concat(t),method:"get"})}};e["a"]=i}}]);
//# sourceMappingURL=roleList.b4877a22.js.map