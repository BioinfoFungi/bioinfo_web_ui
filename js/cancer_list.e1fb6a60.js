(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cancer_list"],{"017e":function(a,t,e){"use strict";var n=e("9efd"),o="/api/data_category",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},"04f1":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-form-model",{ref:"ruleForm",attrs:{model:a.form,rules:a.rules,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{ref:"Name",attrs:{label:"Name",prop:"name"}},[e("a-input",{model:{value:a.form.name,callback:function(t){a.$set(a.form,"name",t)},expression:"form.name"}})],1),e("a-form-model-item",{ref:"taskType",attrs:{label:"taskType",prop:"taskType"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},model:{value:a.form.taskType,callback:function(t){a.$set(a.form,"taskType",t)},expression:"form.taskType"}},a._l(a.taskTypeList,(function(t){return e("a-select-option",{key:t.key,attrs:{value:t.key}},[a._v(" "+a._s(t.value)+" ")])})),1)],1),e("a-form-model-item",{ref:"codeType",attrs:{label:"codeType",prop:"codeType"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},model:{value:a.form.codeType,callback:function(t){a.$set(a.form,"codeType",t)},expression:"form.codeType"}},a._l(a.codeTypeList,(function(t){return e("a-select-option",{key:t.key,attrs:{value:t.key}},[a._v(" "+a._s(t.value)+" ")])})),1)],1),e("a-form-model-item",{ref:"Cancer",attrs:{label:"Cancer",prop:"cancer"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.cancerFocus,search:a.cancerSearch},model:{value:a.form.cancer,callback:function(t){a.$set(a.form,"cancer",t)},expression:"form.cancer"}},[e("a-select-option",{attrs:{value:""}},[a._v(" 不选择 ")]),a._l(a.cancerList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])}))],2)],1),e("a-form-model-item",{ref:"Study",attrs:{label:"Study",prop:"study"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.studyFocus,search:a.studySearch},model:{value:a.form.study,callback:function(t){a.$set(a.form,"study",t)},expression:"form.study"}},a._l(a.studyList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataOrigin",attrs:{label:"DataOrigin",prop:"dataOrigin"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataOriginFocus,search:a.dataOriginSearch},model:{value:a.form.dataOrigin,callback:function(t){a.$set(a.form,"dataOrigin",t)},expression:"form.dataOrigin"}},a._l(a.dataOriginList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataCategory",attrs:{label:"DataCategory",prop:"dataCategory"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataCategoryFocus,search:a.dataCategorySearch},model:{value:a.form.dataCategory,callback:function(t){a.$set(a.form,"dataCategory",t)},expression:"form.dataCategory"}},a._l(a.dataCategoryList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"AnalysisSoftware",attrs:{label:"AnalysisSoftware",prop:"analysisSoftware"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.analysisSoftwareFocus,search:a.analysisSoftwareSearch},model:{value:a.form.analysisSoftware,callback:function(t){a.$set(a.form,"analysisSoftware",t)},expression:"form.analysisSoftware"}},a._l(a.analysisSoftwareList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"absolutePath",attrs:{label:"absolutePath",prop:"absolutePath"}},[e("a-select",{attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.absolutePath},model:{value:a.form.absolutePath,callback:function(t){a.$set(a.form,"absolutePath",t)},expression:"form.absolutePath"}},a._l(a.files,(function(t){return e("a-select-option",{key:t.fileName,attrs:{value:t.absolutePath}},[a._v(" "+a._s(t.fileName)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"haveParentId"}},[e("a-switch",{model:{value:a.form.haveParentId,callback:function(t){a.$set(a.form,"haveParentId",t)},expression:"form.haveParentId"}})],1),e("a-form-model-item",{attrs:{label:"haveExpr"}},[e("a-switch",{model:{value:a.form.haveExpr,callback:function(t){a.$set(a.form,"haveExpr",t)},expression:"form.haveExpr"}})],1),e("a-form-model-item",{attrs:{label:"haveMetadata"}},[e("a-switch",{model:{value:a.form.haveMetadata,callback:function(t){a.$set(a.form,"haveMetadata",t)},expression:"form.haveMetadata"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[e("a-button",{attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("更新Code")]),e("a-button",{staticStyle:{"margin-left":"10px"},on:{click:a.resetForm}},[a._v("重置")])],1)],1)},o=[],r=(e("b0c0"),e("491e")),i=e("f193"),s=e("ba74"),c=e("017e"),l=e("3629"),d=e("47d5"),u=e("3f5e"),f=e("f9fd"),h={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},other:"",projectStatuses:[],value:null,users:[],cancerList:[],studyList:[],dataOriginList:[],dataCategoryList:[],analysisSoftwareList:[],files:[],codeTypeList:[],taskTypeList:[],form:{cancer:void 0,study:void 0,dataOrigin:void 0,dataCategory:void 0,analysisSoftware:void 0,absolutePath:void 0,name:void 0,codeType:void 0,taskType:void 0,haveParentId:!1,haveExpr:!1,haveMetadata:!1},rules:{name:[{required:!0,message:"请输入Term名称",trigger:"change"}]}}},mounted:function(){var a=this;f["a"].codeType().then((function(t){a.codeTypeList=t.data.data})),f["a"].taskType().then((function(t){a.taskTypeList=t.data.data}));var t=this.$route.query.codeId;this.absolutePath(),d["a"].findById(t,{more:!0}).then((function(t){var e=t.data.data;console.log(e),a.form.codeType=e.codeType,a.form.taskType=e.taskType,a.form.haveParentId=e.haveParentId,a.form.haveExpr=e.haveExpr,a.form.haveMetadata=e.haveMetadata,e.absolutePath&&(a.form.absolutePath=e.absolutePath),e.name&&(a.form.name=e.name),e.cancer&&(a.cancerList=[e.cancer],a.form.cancer=e.cancer.name),e.study&&(a.studyList=[e.study],a.form.study=e.study.name),e.dataOrigin&&(a.dataOriginList=[e.dataOrigin],a.form.dataOrigin=e.dataOrigin.name),e.dataCategory&&(a.dataCategoryList=[e.dataCategory],a.form.dataCategory=e.dataCategory.name),e.analysisSoftware&&(a.analysisSoftwareList=[e.analysisSoftware],a.form.analysisSoftware=e.analysisSoftware.name)}))},methods:{loadCancer:function(a){var t=this;r["a"].page(a).then((function(a){var e=a.data.data.content;t.cancerList=e}))},loadStudy:function(a){var t=this;i["a"].page(a).then((function(a){var e=a.data.data.content;t.studyList=e}))},loadDataOrigin:function(a){var t=this;s["a"].page(a).then((function(a){var e=a.data.data.content;t.dataOriginList=e}))},loadDataCategory:function(a){var t=this;c["a"].page(a).then((function(a){var e=a.data.data.content;t.dataCategoryList=e}))},loadAnalysisSoftware:function(a){var t=this;l["a"].page(a).then((function(a){var e=a.data.data.content;t.analysisSoftwareList=e}))},onSubmit:function(){var a=this,t=this.$route.query.codeId;this.$refs.ruleForm.validate((function(e){if(!e)return!1;d["a"].update(t,a.form).then((function(t){a.$notification["success"]({message:"更新建成功!"+t.data.message}),a.$router.push("/cancer/codeList")}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},cancerFocus:function(){this.loadCancer()},cancerSearch:function(a){this.loadCancer({keyword:a})},studyFocus:function(){this.loadStudy()},studySearch:function(a){this.loadStudy({keyword:a})},dataOriginFocus:function(){this.loadDataOrigin()},dataOriginSearch:function(a){this.loadDataOrigin({keyword:a})},dataCategoryFocus:function(){this.loadDataCategory()},dataCategorySearch:function(a){this.loadDataCategory({keyword:a})},analysisSoftwareFocus:function(){this.loadAnalysisSoftware()},analysisSoftwareSearch:function(a){this.loadAnalysisSoftware({keyword:a})},absolutePath:function(){var a=this;u["a"].list("TCGADOWNLOAD/R").then((function(t){a.files=t.data.data}))}}},p=h,m=e("2877"),y=Object(m["a"])(p,n,o,!1,null,null,null);t["default"]=y.exports},"30c0":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-drawer",{attrs:{title:"癌症研究",placement:"right",closable:!1,visible:a.visible,width:"520"},on:{close:a.onClose}},[a.TaskDetail?e("div",[e("div",[a._v(" "+a._s(a.TaskDetail.result)+" ")]),e("a-textarea",{attrs:{placeholder:"run log","auto-size":{minRows:3,maxRows:20}},model:{value:a.TaskDetail.runMsg,callback:function(t){a.$set(a.TaskDetail,"runMsg",t)},expression:"TaskDetail.runMsg"}})],1):a._e(),a.Log?e("div",[e("a-textarea",{attrs:{placeholder:"run log","auto-size":{minRows:3,maxRows:20}},model:{value:a.Log,callback:function(t){a.Log=t},expression:"Log"}})],1):a._e()]),e("a-table",{attrs:{columns:a.task_columns,"row-key":function(a){return a.id},"data-source":a.data,pagination:!1,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"isSuccess",fn:function(t){return e("span",{},[e("a",{attrs:{href:"javascript:;"}},[a._v(a._s(t))])])}},{key:"action",fn:function(t,n){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.shutdownTask(n.id)}}},[a._v("结束")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.runTask(n.id)}}},[a._v("运行")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.showLog(n.id)}}},[a._v("Log ")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.showDrawer(n)}}},[a._v("结果")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.delTask(n.id)}}},[a._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[e("a-pagination",{staticClass:"pagination",attrs:{current:a.pagination.page,total:a.pagination.total,defaultPageSize:a.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:a.handleTableChange,change:a.handleTableChange}})],1)])],2)],1)},o=[],r=(e("b0c0"),e("b199")),i=[{title:"id",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"taskStatus",dataIndex:"taskStatus"},{title:"threadName",dataIndex:"threadName"},{title:"isSuccess",dataIndex:"isSuccess",scopedSlots:{customRender:"isSuccess"}},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],loading:!1,task_columns:i,cancerId:null,visible:!1,TaskDetail:void 0,Log:void 0,setIntervaStatus:void 0}},mounted:function(){var a=this;this.loadData(),this.$websock.onmessage=function(){a.loadData()}},methods:{handleTableChange:function(a,t){this.pagination.page=a,this.pagination.size=t,this.loadData()},loadData:function(){var a=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort;var t=this.$route.query.objId;this.queryParam.objId=t,this.loading=!0,r["a"].page(this.queryParam).then((function(t){a.data=t.data.data.content,a.pagination.total=parseInt(t.data.data.totalElements),a.loading=!1}))},delTask:function(a){var t=this.loadData,e=this.$notification["success"];this.$confirm({title:"删除Task数据",content:"您确定要删除该Task数据吗?",onOk:function(){r["a"].del(a).then((function(a){t(),e({message:"删除成功!"+a.data.message})}))},onCancel:function(){}})},showDrawer:function(a){this.TaskDetail=a,this.visible=!0},loadLog:function(a){var t=this;r["a"].log({taskId:a}).then((function(a){t.Log=a.data.data}))},showLog:function(a){this.visible=!0;var t=this.loadLog;t(a),this.setIntervaStatus=setInterval((function(){t(a)}),1e3)},onClose:function(){this.visible=!1,clearInterval(this.setIntervaStatus)},runTask:function(a){var t=this;r["a"].runOne(a).then((function(a){t.loadData(),t.$message.success(a.data.data.name+"运行成功")}))},shutdownTask:function(a){var t=this;r["a"].shutdown(a).then((function(a){t.loadData(),t.$message.success(a.data.data.name+"已经结束")}))}}},c=s,l=e("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports},3629:function(a,t,e){"use strict";var n=e("9efd"),o="/api/analysis_software",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},"3f5e":function(a,t,e){"use strict";var n=e("9efd"),o="/api/file",r={list:function(a){return Object(n["a"])({url:"".concat(o,"/list"),params:{path:a},method:"get"})}};t["a"]=r},"47d5":function(a,t,e){"use strict";var n=e("9efd"),o="/api/code",r={page:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n["a"])({url:"".concat(o,"?more=").concat(t),params:a,method:"get"})},findByCan:function(a){return Object(n["a"])({url:"".concat(o,"/findByCan/").concat(a),method:"get"})},checkFileExist:function(a){return Object(n["a"])({url:"".concat(o,"/checkFile/").concat(a),method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})},add:function(a){return Object(n["a"])({url:o,data:a,method:"post"})},update:function(a,t){return Object(n["a"])({url:"".concat(o,"/update/").concat(a),data:t,method:"post"})},findById:function(a,t){return Object(n["a"])({url:"".concat(o,"/findById/").concat(a),params:t,method:"get"})},listAllAnnTask:function(){return Object(n["a"])({url:"".concat(o,"/listAllAnnTask"),method:"get"})},createTSVFile:function(){return Object(n["a"])({url:"".concat(o,"/createTSVFile"),method:"post",responseType:"blob"})},init:function(a){return Object(n["a"])({url:"".concat(o,"/init"),params:{path:a},method:"get"})}};t["a"]=r},"491e":function(a,t,e){"use strict";var n=e("9efd"),o="/api/cancer",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},"724d":function(a,t,e){"use strict";var n=e("9efd"),o="/api/cancer_study",r={page:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n["a"])({url:"".concat(o,"?more=").concat(t),params:a,method:"get"})},list:function(a){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(n["a"])({url:"".concat(o,"/list?more=").concat(t),params:a,method:"get"})},listByCancerId:function(a){return Object(n["a"])({url:"".concat(o,"/listByCancerId/").concat(a),method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})},checkFileExist:function(a){return Object(n["a"])({url:"".concat(o,"/checkFile/").concat(a),method:"get"})},add:function(a){return Object(n["a"])({url:o,data:a,method:"post"})},update:function(a,t){return Object(n["a"])({url:"".concat(o,"/update/").concat(a),data:t,method:"post"})},findById:function(a,t){return Object(n["a"])({url:"".concat(o,"/findById/").concat(a),params:t,method:"get"})},createTSVFile:function(){return Object(n["a"])({url:"".concat(o,"/createTSVFile"),method:"post",responseType:"blob"})}};t["a"]=r},"81b2":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-drawer",{attrs:{title:"癌症研究",placement:"right",closable:!1,visible:a.visible,width:"520"},on:{close:a.onClose}},[a.CancerStudyDetial?e("div",[e("a-form-item",{attrs:{label:"fileName"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.fileName}})],1),e("a-form-item",{attrs:{label:"fileType"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.fileType}})],1),e("a-form-item",{attrs:{label:"absolutePath"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.absolutePath}})],1),e("a-form-item",{attrs:{label:"location"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.location}})],1),e("a-form-item",{attrs:{label:"uuid"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.uuid}})],1),e("a-button",{on:{click:function(t){return a.showLog(a.CancerStudyDetial.id)}}},[a._v("查看日志")]),e("a-button",[a._v("重新下载")])],1):a._e()]),e("a-button",{on:{click:a.createTSVFile}},[a._v("导出CSV")]),e("a-button",{on:{click:a.initTSV}},[a._v("导入CSV")]),e("a-table",{attrs:{columns:a.columns,"row-key":function(a){return a.id},"data-source":a.data,pagination:!1,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"action",fn:function(t,n){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.checkFileExist(n.id)}}},[a._v(a._s(n.status))]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.showDrawer(n)}}},[a._v("更多")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.updateCode(n.id)}}},[a._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.delCancerStudy(n.id)}}},[a._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[e("a-pagination",{staticClass:"pagination",attrs:{current:a.pagination.page,total:a.pagination.total,defaultPageSize:a.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:a.handleTableChange,change:a.handleTableChange}})],1)])],2)],1)},o=[],r=e("47d5"),i=[{title:"id",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"癌症名称",dataIndex:"cancer.name"},{title:"研究名称",dataIndex:"study.name"},{title:"数据来源",dataIndex:"dataOrigin.name"},{title:"数据分类",dataIndex:"dataCategory.name"},{title:"分析软件",dataIndex:"analysisSoftware.name"},{title:"执行脚本",dataIndex:"codeType"},{title:"任务类型",dataIndex:"taskType"},{title:"大小",dataIndex:"size"},{title:"日期",dataIndex:"createDate"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],s={data:function(){return{pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],tasks:[],loading:!1,columns:i,cancerId:null,visible:!1,CancerStudyDetial:void 0}},mounted:function(){this.loadData()},methods:{handleTableChange:function(a,t){this.pagination.page=a,this.pagination.size=t,this.loadData()},loadData:function(){var a=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort;var t=this.$route.query.cancerId,e=this.$route.query.studyId,n=this.$route.query.dataOriginId,o=this.$route.query.dataCategoryId,i=this.$route.query.analysisSoftwareId;this.queryParam.cancerId=t,this.queryParam.studyId=e,this.queryParam.dataOriginId=n,this.queryParam.dataCategoryId=o,this.queryParam.analysisSoftwareId=i,this.loading=!0,r["a"].page(this.queryParam,!0).then((function(t){a.data=t.data.data.content,a.pagination.total=parseInt(t.data.data.totalElements),a.loading=!1}))},updateCode:function(a){this.$router.push({name:"update_code",query:{codeId:a}})},delCancerStudy:function(a){var t=this.loadData,e=this.$notification["success"];this.$confirm({title:"删除Code数据",content:"您确定要删除该Code数据吗?",onOk:function(){r["a"].del(a).then((function(a){t(),e({message:"删除成功!"+a.data.message})}))},onCancel:function(){}})},showDrawer:function(a){this.CancerStudyDetial=a,this.visible=!0},onClose:function(){this.visible=!1},checkFileExist:function(a){var t=this.loadData,e=this.$notification["success"],n=this.$notification["error"];r["a"].checkFileExist(a).then((function(a){t(),a.data.data.status?e({message:"文件存在："+a.data.data.absolutePath}):n({message:"文件不存在"+a.data.data.absolutePath})}))},showLog:function(a){this.$router.push({name:"cancer_study_task",query:{objId:a}})},createTSVFile:function(){r["a"].createTSVFile().then((function(a){var t=a.data,e=new FileReader;e.readAsDataURL(t),e.onload=function(a){var t=document.createElement("a");t.download="export.tsv",t.href=a.target.result,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}))},initTSV:function(){var a=this;r["a"].init(null).then((function(t){a.$notification["success"]({message:"文件不存在"+t.data.message})}))}}},c=s,l=e("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports},"883d":function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-form-model",{ref:"ruleForm",attrs:{model:a.form,rules:a.rules,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{ref:"name",attrs:{label:"name",prop:"name"}},[e("a-input",{model:{value:a.form.name,callback:function(t){a.$set(a.form,"name",t)},expression:"form.name"}})],1),e("a-form-model-item",{ref:"taskType",attrs:{label:"taskType",prop:"taskType"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},model:{value:a.form.taskType,callback:function(t){a.$set(a.form,"taskType",t)},expression:"form.taskType"}},a._l(a.taskTypeList,(function(t){return e("a-select-option",{key:t.key,attrs:{value:t.key}},[a._v(" "+a._s(t.value)+" ")])})),1)],1),e("a-form-model-item",{ref:"codeType",attrs:{label:"codeType",prop:"codeType"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},model:{value:a.form.codeType,callback:function(t){a.$set(a.form,"codeType",t)},expression:"form.codeType"}},a._l(a.codeTypeList,(function(t){return e("a-select-option",{key:t.key,attrs:{value:t.key}},[a._v(" "+a._s(t.value)+" ")])})),1)],1),e("a-form-model-item",{ref:"Cancer",attrs:{label:"Cancer",prop:"cancer"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.cancerFocus,search:a.cancerSearch},model:{value:a.form.cancer,callback:function(t){a.$set(a.form,"cancer",t)},expression:"form.cancer"}},a._l(a.cancerList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"Study",attrs:{label:"Study",prop:"study"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.studyFocus,search:a.studySearch},model:{value:a.form.study,callback:function(t){a.$set(a.form,"study",t)},expression:"form.study"}},a._l(a.studyList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataOrigin",attrs:{label:"DataOrigin",prop:"dataOrigin"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataOriginFocus,search:a.dataOriginSearch},model:{value:a.form.dataOrigin,callback:function(t){a.$set(a.form,"dataOrigin",t)},expression:"form.dataOrigin"}},a._l(a.dataOriginList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataCategory",attrs:{label:"DataCategory",prop:"dataCategory"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataCategoryFocus,search:a.dataCategorySearch},model:{value:a.form.dataCategory,callback:function(t){a.$set(a.form,"dataCategory",t)},expression:"form.dataCategory"}},a._l(a.dataCategoryList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"AnalysisSoftware",attrs:{label:"AnalysisSoftware",prop:"analysisSoftware"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.analysisSoftwareFocus,search:a.analysisSoftwareSearch},model:{value:a.form.analysisSoftware,callback:function(t){a.$set(a.form,"analysisSoftware",t)},expression:"form.analysisSoftware"}},a._l(a.analysisSoftwareList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"absolutePath",attrs:{label:"absolutePath",prop:"absolutePath"}},[e("a-select",{attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.absolutePath},model:{value:a.form.absolutePath,callback:function(t){a.$set(a.form,"absolutePath",t)},expression:"form.absolutePath"}},a._l(a.files,(function(t){return e("a-select-option",{key:t.fileName,attrs:{value:t.absolutePath}},[a._v(" "+a._s(t.fileName)+" ")])})),1)],1),e("a-form-model-item",{attrs:{label:"haveParentId"}},[e("a-switch",{model:{value:a.form.haveParentId,callback:function(t){a.$set(a.form,"haveParentId",t)},expression:"form.haveParentId"}})],1),e("a-form-model-item",{attrs:{label:"haveExpr"}},[e("a-switch",{model:{value:a.form.haveExpr,callback:function(t){a.$set(a.form,"haveExpr",t)},expression:"form.haveExpr"}})],1),e("a-form-model-item",{attrs:{label:"haveMetadata"}},[e("a-switch",{model:{value:a.form.haveMetadata,callback:function(t){a.$set(a.form,"haveMetadata",t)},expression:"form.haveMetadata"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[e("a-button",{attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("添加Code")]),e("a-button",{staticStyle:{"margin-left":"10px"},on:{click:a.resetForm}},[a._v("重置")])],1)],1)},o=[],r=e("491e"),i=e("3f5e"),s=e("f193"),c=e("ba74"),l=e("017e"),d=e("3629"),u=e("f9fd"),f=e("47d5"),h={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},other:"",projectStatuses:[],value:null,users:[],cancerList:[],studyList:[],dataOriginList:[],dataCategoryList:[],analysisSoftwareList:[],codeTypeList:[],taskTypeList:[],files:[],form:{cancer:void 0,study:void 0,dataOrigin:void 0,dataCategory:void 0,analysisSoftware:void 0,absolutePath:void 0,name:void 0,codeType:void 0,taskType:void 0,haveParentId:!1,haveExpr:!1,haveMetadata:!1},rules:{name:[{required:!0,message:"请输入Term名称",trigger:"change"}]}}},mounted:function(){var a=this;u["a"].codeType().then((function(t){a.codeTypeList=t.data.data})),u["a"].taskType().then((function(t){a.taskTypeList=t.data.data}))},methods:{loadCancer:function(a){var t=this;r["a"].page(a).then((function(a){var e=a.data.data.content;t.cancerList=e}))},loadStudy:function(a){var t=this;s["a"].page(a).then((function(a){var e=a.data.data.content;t.studyList=e}))},loadDataOrigin:function(a){var t=this;c["a"].page(a).then((function(a){var e=a.data.data.content;t.dataOriginList=e}))},loadDataCategory:function(a){var t=this;l["a"].page(a).then((function(a){var e=a.data.data.content;t.dataCategoryList=e}))},loadAnalysisSoftware:function(a){var t=this;d["a"].page(a).then((function(a){var e=a.data.data.content;t.analysisSoftwareList=e}))},onSubmit:function(){var a=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;f["a"].add(a.form).then((function(t){a.$notification["success"]({message:"添加建成功!"+t.data.message}),a.$router.push("/cancer/codeList")}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},cancerFocus:function(){this.loadCancer()},cancerSearch:function(a){this.loadCancer({keyword:a})},studyFocus:function(){this.loadStudy()},studySearch:function(a){this.loadStudy({keyword:a})},dataOriginFocus:function(){this.loadDataOrigin()},dataOriginSearch:function(a){this.loadDataOrigin({keyword:a})},dataCategoryFocus:function(){this.loadDataCategory()},dataCategorySearch:function(a){this.loadDataCategory({keyword:a})},analysisSoftwareFocus:function(){this.loadAnalysisSoftware()},analysisSoftwareSearch:function(a){this.loadAnalysisSoftware({keyword:a})},absolutePath:function(){var a=this;i["a"].list("TCGADOWNLOAD/R").then((function(t){a.files=t.data.data}))}}},p=h,m=e("2877"),y=Object(m["a"])(p,n,o,!1,null,null,null);t["default"]=y.exports},a366:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-button",{attrs:{type:"primary"},on:{click:a.showModal}},[a._v(" 添加注释 ")]),e("a-modal",{attrs:{title:"添加注释"},on:{ok:a.handleOk},model:{value:a.visibleDialog,callback:function(t){a.visibleDialog=t},expression:"visibleDialog"}},[e("a-form-model",{ref:"ruleForm",attrs:{model:a.form,rules:a.rules,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{ref:"enName",attrs:{label:"enName",prop:"enName"}},[e("a-input",{model:{value:a.form.enName,callback:function(t){a.$set(a.form,"enName",t)},expression:"form.enName"}})],1),e("a-form-model-item",{ref:"absolutePath",attrs:{label:"absolutePath",prop:"absolutePath"}},[e("a-input",{model:{value:a.form.absolutePath,callback:function(t){a.$set(a.form,"absolutePath",t)},expression:"form.absolutePath"}})],1),e("a-form-model-item",{ref:"symbol",attrs:{label:"symbol",prop:"symbol"}},[e("a-input",{model:{value:a.form.symbol,callback:function(t){a.$set(a.form,"symbol",t)},expression:"form.symbol"}})],1),e("a-form-model-item",{ref:"probeId",attrs:{label:"probeId",prop:"probeId"}},[e("a-input",{model:{value:a.form.probeId,callback:function(t){a.$set(a.form,"probeId",t)},expression:"form.probeId"}})],1)],1)],1),e("a-drawer",{attrs:{title:"癌症研究",placement:"right",closable:!1,visible:a.visible,width:"520"},on:{close:a.onClose}},[a.CancerStudyDetial?e("div",[e("a-form-item",{attrs:{label:"fileName"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.fileName}})],1),e("a-form-item",{attrs:{label:"fileType"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.fileType}})],1),e("a-form-item",{attrs:{label:"absolutePath"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.absolutePath}})],1),e("a-form-item",{attrs:{label:"location"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.location}})],1),e("a-form-item",{attrs:{label:"uuid"}},[e("a-input",{attrs:{value:a.CancerStudyDetial.uuid}})],1),a._l(a.codes,(function(t){return e("a-button",{key:t.id,attrs:{type:"link"},on:{click:function(e){return a.runTask(a.CancerStudyDetial.id,t.id)}}},[a._v(" "+a._s(t.name)+" ")])})),e("a-divider"),a.runMsg?e("a-textarea",{attrs:{placeholder:"run log","auto-size":{minRows:3,maxRows:20}},model:{value:a.runMsg,callback:function(t){a.runMsg=t},expression:"runMsg"}}):a._e(),e("div",[e("a-table",{attrs:{columns:a.task_columns,"data-source":a.taskList,bordered:"",pagination:!1,"row-key":function(a){return a.id}}})],1),e("a-button",{on:{click:function(t){return a.showLog(a.CancerStudyDetial.id)}}},[a._v("查看更多")])],2):a._e()]),e("a-table",{attrs:{columns:a.columns,"row-key":function(a){return a.id},"data-source":a.data,pagination:!1,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"action",fn:function(t,n){return e("span",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.checkFileExist(n.id)}}},[a._v(a._s(n.status))]),n.status?e("a-divider",{attrs:{type:"vertical"}}):a._e(),n.status?e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.downlaod(n)}}},[a._v("下载")]):a._e(),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.showDrawer(n)}}},[a._v("更多")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.updateAnnotationEdit(n)}}},[a._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.delCancerStudy(n.id)}}},[a._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[e("a-pagination",{staticClass:"pagination",attrs:{current:a.pagination.page,total:a.pagination.total,defaultPageSize:a.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:a.handleTableChange,change:a.handleTableChange}})],1)])],2)],1)},o=[],r=(e("b0c0"),e("9efd")),i="/api/annotation",s={page:function(a){return Object(r["a"])({url:"".concat(i),params:a,method:"get"})},del:function(a){return Object(r["a"])({url:"".concat(i,"/del/").concat(a),method:"get"})},checkFileExist:function(a){return Object(r["a"])({url:"".concat(i,"/checkFile/").concat(a),method:"get"})},add:function(a){return Object(r["a"])({url:i,data:a,method:"post"})},update:function(a,t){return Object(r["a"])({url:"".concat(i,"/update/").concat(a),data:t,method:"post"})}},c=s,l=e("47d5"),d=e("b199"),u=[{title:"id",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"taskStatus",dataIndex:"taskStatus"},{title:"isSuccess",dataIndex:"isSuccess"}],f=[{title:"id",dataIndex:"id"},{title:"absolutePath",dataIndex:"absolutePath"},{title:"enName",dataIndex:"enName"},{title:"codeId",dataIndex:"codeId"},{title:"parentId",dataIndex:"parentId"},{title:"symbol",dataIndex:"symbol"},{title:"probeId",dataIndex:"probeId"},{title:"大小",dataIndex:"size"},{title:"日期",dataIndex:"createDate"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],h={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},form:{enName:void 0,absolutePath:void 0,symbol:void 0,probeId:void 0},data:[],codes:[],tasks:[],loading:!1,columns:f,task_columns:u,cancerId:null,visible:!1,visibleDialog:!1,CancerStudyDetial:void 0,runMsg:void 0,taskList:[],isUpdate:!1,rules:{enName:[{required:!0,message:"请输入名称",trigger:"change"}]}}},mounted:function(){var a=this;this.loadData(),this.$websock&&(this.$websock.onmessage=function(t){var e=JSON.parse(t.data);e.cancerStudyId==a.CancerStudyDetial.id&&(a.runMsg=e.runMsg),a.loadData()})},methods:{handleTableChange:function(a,t){this.pagination.page=a,this.pagination.size=t,this.loadData()},loadData:function(){var a=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,this.loading=!0,c.page(this.queryParam,!0).then((function(t){a.data=t.data.data.content,a.pagination.total=parseInt(t.data.data.totalElements),a.loading=!1}))},laodCodes:function(){var a=this;l["a"].listAllAnnTask().then((function(t){a.codes=t.data.data}))},updateAnnotationEdit:function(a){this.visibleDialog=!0,this.form=a,this.isUpdate=!0},updateAnnotation:function(){var a=this;c.update(this.form.id,this.form).then((function(t){a.$notification["success"]({message:t.data.data.enName+":更新成功!"}),a.visibleDialog=!1,a.loadData()}))},addAnnotation:function(){var a=this;c.add(this.form).then((function(t){a.$notification["success"]({message:t.data.data.enName+":添加成功!"}),a.visibleDialog=!1,a.loadData()}))},delCancerStudy:function(a){var t=this.loadData,e=this.$notification["success"];this.$confirm({title:"删除癌症数据",content:"您确定要删除该癌症数据吗?",onOk:function(){c.del(a).then((function(a){t(),e({message:"删除成功!"+a.data.message})}))},onCancel:function(){}})},loadTask:function(a){var t=this;d["a"].page({objId:a,taskType:"ANNOTATION"}).then((function(a){t.taskList=a.data.data.content}))},showDrawer:function(a){this.CancerStudyDetial=a,this.isUpdate=!1,this.loadTask(a.id),this.laodCodes(),this.visible=!0},onClose:function(){this.visible=!1,this.runMsg=void 0},checkFileExist:function(a){var t=this.loadData,e=this.$notification["success"],n=this.$notification["error"];c.checkFileExist(a).then((function(a){t(),a.data.data.status?e({message:"文件存在："+a.data.data.absolutePath}):n({message:"文件不存在"+a.data.data.absolutePath})}))},showLog:function(a){this.$router.push({name:"cancer_study_task",query:{cancerStudyId:a}})},downlaod:function(a){var t=JSON.parse(localStorage.getItem("global_config"));window.location.href=t.download_url+"/"+a.relativePath},showModal:function(){this.visibleDialog=!0},handleOk:function(){var a=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;a.isUpdate?a.updateAnnotation():a.addAnnotation()}))},runTask:function(a,t){var e=this;d["a"].run({objId:a,codeId:t,taskType:"ANNOTATION"}).then((function(a){e.$message.success(a.data.data.name+"创建成功")}))}}},p=h,m=e("2877"),y=Object(m["a"])(p,n,o,!1,null,null,null);t["default"]=y.exports},b199:function(a,t,e){"use strict";var n=e("9efd"),o="/api/task",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},run:function(a){return Object(n["a"])({url:"".concat(o,"/run"),params:a,method:"get"})},log:function(a){return Object(n["a"])({url:"".concat(o,"/log"),params:a,method:"get"})},runOne:function(a){return Object(n["a"])({url:"".concat(o,"/run/").concat(a),method:"get"})},shutdown:function(a){return Object(n["a"])({url:"".concat(o,"/shutdown/").concat(a),method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},ba74:function(a,t,e){"use strict";var n=e("9efd"),o="/api/data_origin",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},cc1e:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-form-model",{ref:"ruleForm",attrs:{model:a.form,rules:a.rules,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{ref:"Cancer",attrs:{label:"Cancer",prop:"cancer"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.cancerFocus,search:a.cancerSearch},model:{value:a.form.cancer,callback:function(t){a.$set(a.form,"cancer",t)},expression:"form.cancer"}},a._l(a.cancerList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"Study",attrs:{label:"Study",prop:"study"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.studyFocus,search:a.studySearch},model:{value:a.form.study,callback:function(t){a.$set(a.form,"study",t)},expression:"form.study"}},a._l(a.studyList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataOrigin",attrs:{label:"DataOrigin",prop:"dataOrigin"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataOriginFocus,search:a.dataOriginSearch},model:{value:a.form.dataOrigin,callback:function(t){a.$set(a.form,"dataOrigin",t)},expression:"form.dataOrigin"}},a._l(a.dataOriginList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataCategory",attrs:{label:"DataCategory",prop:"dataCategory"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataCategoryFocus,search:a.dataCategorySearch},model:{value:a.form.dataCategory,callback:function(t){a.$set(a.form,"dataCategory",t)},expression:"form.dataCategory"}},a._l(a.dataCategoryList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"AnalysisSoftware",attrs:{label:"AnalysisSoftware",prop:"analysisSoftware"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.analysisSoftwareFocus,search:a.analysisSoftwareSearch},model:{value:a.form.analysisSoftware,callback:function(t){a.$set(a.form,"analysisSoftware",t)},expression:"form.analysisSoftware"}},a._l(a.analysisSoftwareList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"absolutePath",attrs:{label:"absolutePath",prop:"absolutePath"}},[e("a-input",{model:{value:a.form.absolutePath,callback:function(t){a.$set(a.form,"absolutePath",t)},expression:"form.absolutePath"}})],1),e("a-form-model-item",{ref:"gse",attrs:{label:"gse",prop:"gse"}},[e("a-input",{model:{value:a.form.gse,callback:function(t){a.$set(a.form,"gse",t)},expression:"form.gse"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[e("a-button",{attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("添加癌症研究")]),e("a-button",{staticStyle:{"margin-left":"10px"},on:{click:a.resetForm}},[a._v("重置")])],1)],1)},o=[],r=e("491e"),i=e("f193"),s=e("ba74"),c=e("017e"),l=e("3629"),d=e("724d"),u={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},other:"",projectStatuses:[],value:null,users:[],cancerList:[],studyList:[],dataOriginList:[],dataCategoryList:[],analysisSoftwareList:[],form:{cancer:void 0,study:void 0,dataOrigin:void 0,dataCategory:void 0,analysisSoftware:void 0,absolutePath:void 0,gse:void 0},rules:{cancer:[{required:!0,message:"请输入Term名称",trigger:"change"}],study:[{required:!0,message:"请输入Term名称",trigger:"change"}],dataOrigin:[{required:!0,message:"请输入Term名称",trigger:"change"}],dataCategory:[{required:!0,message:"请输入Term名称",trigger:"change"}]}}},created:function(){},methods:{loadCancer:function(a){var t=this;r["a"].page(a).then((function(a){var e=a.data.data.content;t.cancerList=e}))},loadStudy:function(a){var t=this;i["a"].page(a).then((function(a){var e=a.data.data.content;t.studyList=e}))},loadDataOrigin:function(a){var t=this;s["a"].page(a).then((function(a){var e=a.data.data.content;t.dataOriginList=e}))},loadDataCategory:function(a){var t=this;c["a"].page(a).then((function(a){var e=a.data.data.content;t.dataCategoryList=e}))},loadAnalysisSoftware:function(a){var t=this;l["a"].page(a).then((function(a){var e=a.data.data.content;t.analysisSoftwareList=e}))},onSubmit:function(){var a=this;this.$refs.ruleForm.validate((function(t){if(!t)return!1;d["a"].add(a.form).then((function(t){a.$notification["success"]({message:"添加建成功!"+t.data.message});var e=t.data.data;a.$router.push("/cancer/cancer_detial?cancerId="+e.cancerId+"&studyId="+e.studyId+"&dataOriginId="+e.dataOriginId+"&dataCategoryId="+e.dataCategoryId)}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},cancerFocus:function(){this.loadCancer()},cancerSearch:function(a){this.loadCancer({keyword:a})},studyFocus:function(){this.loadStudy()},studySearch:function(a){this.loadStudy({keyword:a})},dataOriginFocus:function(){this.loadDataOrigin()},dataOriginSearch:function(a){this.loadDataOrigin({keyword:a})},dataCategoryFocus:function(){this.loadDataCategory()},dataCategorySearch:function(a){this.loadDataCategory({keyword:a})},analysisSoftwareFocus:function(){this.loadAnalysisSoftware()},analysisSoftwareSearch:function(a){this.loadAnalysisSoftware({keyword:a})}}},f=u,h=e("2877"),p=Object(h["a"])(f,n,o,!1,null,null,null);t["default"]=p.exports},ea41:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("a-form-model",{ref:"ruleForm",attrs:{model:a.form,rules:a.rules,"label-col":a.labelCol,"wrapper-col":a.wrapperCol}},[e("a-form-model-item",{ref:"Cancer",attrs:{label:"Cancer",prop:"cancer"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.cancerFocus,search:a.cancerSearch},model:{value:a.form.cancer,callback:function(t){a.$set(a.form,"cancer",t)},expression:"form.cancer"}},a._l(a.cancerList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"Study",attrs:{label:"Study",prop:"study"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.studyFocus,search:a.studySearch},model:{value:a.form.study,callback:function(t){a.$set(a.form,"study",t)},expression:"form.study"}},a._l(a.studyList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataOrigin",attrs:{label:"DataOrigin",prop:"dataOrigin"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataOriginFocus,search:a.dataOriginSearch},model:{value:a.form.dataOrigin,callback:function(t){a.$set(a.form,"dataOrigin",t)},expression:"form.dataOrigin"}},a._l(a.dataOriginList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"DataCategory",attrs:{label:"DataCategory",prop:"dataCategory"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.dataCategoryFocus,search:a.dataCategorySearch},model:{value:a.form.dataCategory,callback:function(t){a.$set(a.form,"dataCategory",t)},expression:"form.dataCategory"}},a._l(a.dataCategoryList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"AnalysisSoftware",attrs:{label:"AnalysisSoftware",prop:"analysisSoftware"}},[e("a-select",{staticStyle:{width:"200px"},attrs:{"show-search":"",placeholder:"Select a person","option-filter-prop":"children"},on:{focus:a.analysisSoftwareFocus,search:a.analysisSoftwareSearch},model:{value:a.form.analysisSoftware,callback:function(t){a.$set(a.form,"analysisSoftware",t)},expression:"form.analysisSoftware"}},a._l(a.analysisSoftwareList,(function(t){return e("a-select-option",{key:t.id,attrs:{value:t.enName}},[a._v(" "+a._s(t.name)+" ")])})),1)],1),e("a-form-model-item",{ref:"absolutePath",attrs:{label:"absolutePath",prop:"absolutePath"}},[e("a-input",{model:{value:a.form.absolutePath,callback:function(t){a.$set(a.form,"absolutePath",t)},expression:"form.absolutePath"}})],1),e("a-form-model-item",{ref:"gse",attrs:{label:"gse",prop:"gse"}},[e("a-input",{model:{value:a.form.gse,callback:function(t){a.$set(a.form,"gse",t)},expression:"form.gse"}})],1),e("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[e("a-button",{attrs:{type:"primary"},on:{click:a.onSubmit}},[a._v("更新癌症研究")]),e("a-button",{staticStyle:{"margin-left":"10px"},on:{click:a.resetForm}},[a._v("重置")])],1)],1)},o=[],r=(e("b0c0"),e("491e")),i=e("f193"),s=e("ba74"),c=e("017e"),l=e("3629"),d=e("724d"),u={data:function(){return{labelCol:{span:4},wrapperCol:{span:14},other:"",projectStatuses:[],value:null,users:[],cancerList:[],studyList:[],dataOriginList:[],dataCategoryList:[],analysisSoftwareList:[],form:{cancer:void 0,study:void 0,dataOrigin:void 0,dataCategory:void 0,analysisSoftware:void 0,absolutePath:void 0,gse:void 0},rules:{cancer:[{required:!0,message:"请输入Term名称",trigger:"change"}],study:[{required:!0,message:"请输入Term名称",trigger:"change"}],dataOrigin:[{required:!0,message:"请输入Term名称",trigger:"change"}],dataCategory:[{required:!0,message:"请输入Term名称",trigger:"change"}]}}},created:function(){var a=this,t=this.$route.query.cancerStudyId;d["a"].findById(t,{more:!0}).then((function(t){var e=t.data.data;a.form.absolutePath=e.absolutePath,a.form.gse=e.gse,a.cancerList=[e.cancer],a.form.cancer=e.cancer.name,a.studyList=[e.study],a.form.study=e.study.name,a.dataOriginList=[e.dataOrigin],a.form.dataOrigin=e.dataOrigin.name,a.dataCategoryList=[e.dataCategory],a.form.dataCategory=e.dataCategory.name,e.analysisSoftware&&(a.analysisSoftwareList=[e.analysisSoftware],a.form.analysisSoftware=e.analysisSoftware.name)}))},methods:{loadCancer:function(a){var t=this;r["a"].page(a).then((function(a){var e=a.data.data.content;t.cancerList=e}))},loadStudy:function(a){var t=this;i["a"].page(a).then((function(a){var e=a.data.data.content;t.studyList=e}))},loadDataOrigin:function(a){var t=this;s["a"].page(a).then((function(a){var e=a.data.data.content;t.dataOriginList=e}))},loadDataCategory:function(a){var t=this;c["a"].page(a).then((function(a){var e=a.data.data.content;t.dataCategoryList=e}))},loadAnalysisSoftware:function(a){var t=this;l["a"].page(a).then((function(a){var e=a.data.data.content;t.analysisSoftwareList=e}))},onSubmit:function(){var a=this,t=this.$route.query.cancerStudyId;this.$refs.ruleForm.validate((function(e){if(!e)return!1;d["a"].update(t,a.form).then((function(t){a.$notification["success"]({message:"更新建成功!"+t.data.message});var e=t.data.data;a.$router.push("/cancer/cancer_detial?cancerId="+e.cancerId+"&studyId="+e.studyId+"&dataOriginId="+e.dataOriginId+"&dataCategoryId="+e.dataCategoryId)}))}))},resetForm:function(){this.$refs.ruleForm.resetFields()},cancerFocus:function(){this.loadCancer()},cancerSearch:function(a){this.loadCancer({keyword:a})},studyFocus:function(){this.loadStudy()},studySearch:function(a){this.loadStudy({keyword:a})},dataOriginFocus:function(){this.loadDataOrigin()},dataOriginSearch:function(a){this.loadDataOrigin({keyword:a})},dataCategoryFocus:function(){this.loadDataCategory()},dataCategorySearch:function(a){this.loadDataCategory({keyword:a})},analysisSoftwareFocus:function(){this.loadAnalysisSoftware()},analysisSoftwareSearch:function(a){this.loadAnalysisSoftware({keyword:a})}}},f=u,h=e("2877"),p=Object(h["a"])(f,n,o,!1,null,null,null);t["default"]=p.exports},eea8:function(a,t,e){"use strict";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:"input search text"},on:{search:a.onSearch}}),e("a-table",{attrs:{columns:a.columns,"row-key":function(a){return a.id},"data-source":a.data,pagination:!1,loading:a.loading},on:{change:a.handleTableChange},scopedSlots:a._u([{key:"name",fn:function(t,n){return e("div",{},[e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.detial(n.id)}}},[a._v(a._s(t))])])}},{key:"action",fn:function(t,n){return e("span",{},[e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.updateProject(n.id)}}},[a._v("编辑")]),e("a-divider",{attrs:{type:"vertical"}}),e("a",{attrs:{href:"javascript:;"},on:{click:function(t){return a.delProject(n.id)}}},[a._v("删除")])],1)}}])},[e("template",{slot:"footer"},[e("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[e("a-pagination",{staticClass:"pagination",attrs:{current:a.pagination.page,total:a.pagination.total,defaultPageSize:a.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:a.handleTableChange,change:a.handleTableChange}})],1)])],2)],1)},o=[],r=(e("b0c0"),e("491e")),i=[{title:"癌症名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"英文名称",dataIndex:"enName"},{title:"创建日期",dataIndex:"createDate"}],s={data:function(){return{pagination:{page:1,size:10,sort:null,keyword:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],loading:!1,columns:i}},mounted:function(){this.loadData()},methods:{handleTableChange:function(a,t){this.pagination.page=a,this.pagination.size=t,this.loadData()},loadData:function(){var a=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,this.queryParam.keyword=this.pagination.keyword,this.loading=!0,r["a"].page(this.queryParam).then((function(t){a.data=t.data.data.content,a.pagination.total=parseInt(t.data.data.totalElements),a.loading=!1}))},updateProject:function(a){this.$router.push({name:"cancer_cancer_study",query:{projectId:a}})},delProject:function(a){var t=this;r["a"].del(a).then((function(a){t.$notification["success"]({message:a.data.data.name+":删除成功!"}),t.loadData()}))},detial:function(a){this.$router.push({name:"cancer_cancer_detial",query:{cancerId:a}})},onSearch:function(a){this.pagination.keyword=a,this.loadData()}}},c=s,l=e("2877"),d=Object(l["a"])(c,n,o,!1,null,null,null);t["default"]=d.exports},f193:function(a,t,e){"use strict";var n=e("9efd"),o="/api/study",r={page:function(a){return Object(n["a"])({url:"".concat(o),params:a,method:"get"})},del:function(a){return Object(n["a"])({url:"".concat(o,"/del/").concat(a),method:"get"})}};t["a"]=r},f9fd:function(a,t,e){"use strict";var n=e("9efd"),o="/api/enum",r={projectStatuses:function(){return Object(n["a"])({url:"".concat(o,"/projectStatuses"),method:"get"})},codeType:function(){return Object(n["a"])({url:"".concat(o,"/codeType"),method:"get"})},taskType:function(){return Object(n["a"])({url:"".concat(o,"/taskType"),method:"get"})}};t["a"]=r}}]);
//# sourceMappingURL=cancer_list.e1fb6a60.js.map