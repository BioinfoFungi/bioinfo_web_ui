(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userList"],{"21ad":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-drawer",{attrs:{title:"用户管理",placement:"right",closable:!1,visible:t.visible,width:"520"},on:{close:t.onClose}},[t.cur_user?a("div",[t._v(" "+t._s(t.cur_user)+" ")]):t._e(),a("div",[a("a-select",{staticStyle:{width:"200px"},attrs:{size:"default"},model:{value:t.selectedRole,callback:function(e){t.selectedRole=e},expression:"selectedRole"}},t._l(t.roles,(function(e){return a("a-select-option",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),1),a("a-button",{on:{click:t.addUserRole}},[t._v("确认")]),a("a-table",{attrs:{columns:t.roleListColumns,"data-source":t.roleList,bordered:"",pagination:!1,"row-key":function(t){return t.id}}})],1)]),a("a-table",{attrs:{columns:t.columns,"row-key":function(t){return t.id},"data-source":t.data,pagination:!1,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.showDrawer(n)}}},[t._v("更多")])],1)}}])},[a("template",{slot:"footer"},[a("div",{staticClass:"page-wrapper",style:{textAlign:"right"}},[a("a-pagination",{staticClass:"pagination",attrs:{current:t.pagination.page,total:t.pagination.total,defaultPageSize:t.pagination.size,pageSizeOptions:["5","10","20","50","100"],showSizeChanger:""},on:{showSizeChange:t.handleTableChange,change:t.handleTableChange}})],1)])],2)],1)},i=[],o=a("9fb8"),l=a("cc5e"),s=a("9efd"),r="/api/user_role",d={add:function(t){return Object(s["a"])({url:r,data:t,method:"post"})}},c=d,u=[{title:"id",dataIndex:"id"},{title:"name",dataIndex:"name"},{title:"enName",dataIndex:"enName"}],h=[{title:"id",dataIndex:"id"},{title:"username",dataIndex:"username"},{title:"enName",dataIndex:"enName"},{title:"Action",key:"action",scopedSlots:{customRender:"action"}}],g={data:function(){return{pagination:{page:1,size:10,sort:null},queryParam:{page:0,size:10,sort:null,keyword:null,categoryId:null,status:null},data:[],loading:!1,columns:h,visible:!1,cur_user:void 0,roles:[],roleList:[],selectedRole:"",roleListColumns:u}},mounted:function(){this.loadData()},methods:{handleTableChange:function(t,e){this.pagination.page=t,this.pagination.size=e,this.loadData()},loadData:function(){var t=this;this.queryParam.page=this.pagination.page-1,this.queryParam.size=this.pagination.size,this.queryParam.sort=this.pagination.sort,this.loading=!0,o["a"].page(this.queryParam).then((function(e){t.data=e.data.data.content,t.pagination.total=parseInt(e.data.data.totalElements),t.loading=!1}))},loadRole:function(t){var e=this;l["a"].findByRoleId(t).then((function(t){e.roleList=t.data.data}))},showDrawer:function(t){var e=this;this.cur_user=t,this.visible=!0,l["a"].listAll().then((function(t){e.roles=t.data.data})),this.loadRole(t.id)},onClose:function(){this.visible=!1},handleChange:function(){},addUserRole:function(){var t=this;c.add({userId:this.cur_user.id,roleId:this.selectedRole}).then((function(e){t.loadRole(t.cur_user.id),t.$notification["success"]({message:"添加成功"+e.data.message})}))}}},p=g,f=a("2877"),m=Object(f["a"])(p,n,i,!1,null,null,null);e["default"]=m.exports},"9fb8":function(t,e,a){"use strict";var n=a("9efd"),i="/api/user",o={page:function(t){return Object(n["a"])({url:"".concat(i),params:t,method:"get"})},login:function(t){return Object(n["a"])({url:"".concat(i,"/login"),data:t,method:"post"})},listAll:function(){return Object(n["a"])({url:"".concat(i,"/listAll"),method:"get"})}};e["a"]=o},cc5e:function(t,e,a){"use strict";var n=a("9efd"),i="/api/role",o={page:function(t){return Object(n["a"])({url:"".concat(i),params:t,method:"get"})},listAll:function(){return Object(n["a"])({url:"".concat(i,"/listAll"),method:"get"})},findByRoleId:function(t){return Object(n["a"])({url:"".concat(i,"/findByRoleId/").concat(t),method:"get"})}};e["a"]=o}}]);
//# sourceMappingURL=userList.66a03b0a.js.map